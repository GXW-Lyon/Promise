<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <script>
    // new Promise(function(resolve,reject){
    //   setTimeout(function(){
    //     resolve('success');
    //   },2000)
    // }).then(function(data){
    //   var p =data;
    //   console.log(data)
    //   return p;
    // },function(err){
    //   console.log(err);
    // }).then(function(data){
    //   console.log('链式调用:'+data);
    // }).then(function(data){
    //   console.log(1);
    // })
    // (function fn(){
    //   setTimeout(function(){
    //     console.log(1);
    //   },2000);
    // })()

// function fn(){
//   new Promise(function(resolve,reject){
//       console.log(1);
//     })
// }
// fn();

// function timeout(ms){
//   return new Promise((resolve,reject)=>{
//     setTimeout(resolve,ms,'done');
//   })
// }
// timeout(100).then((value)=>{
//   console.log(value);
// })

// let promise = new Promise(function(resolve,reject){
//   console.log('Promise');
//   resolve();
// })
// promise.then(function(){
//   console.log('resolved');
// })
// console.log('Hi');

// function loadImageAsync(url){
//   return new Promise(function(resolve,reject){
//     const image = new Image();
//     image.onload = function(){
//       resolve(image);
//     }
//     image.onerror = function(){
//       reject(new Error('Could not load image at'+url));
//     }
//     image.src = url;
//   });
// }
// loadImageAsync(); 

// const getJSON = function(url){
//   const promise = new Promise(function(resolve,reject){
//     const handler = function(){
//       if(this.readySatte !==4){
//         return;
//       }
//       if(this.status===200){
//         resolve(this.response);
//       }else{
//         reject(new Error(this.statusText));
//       }
//     };
//     const client = new XMLHttpRequest();
//     client.open('GET',url);
//     cresiltlient.onreadystatechange = handler;
//     client.respnseType = 'json';
//     client.setRequestHeader('Accept',"application/json");
//     client.send();
//   })
//   return promise;
// }
// getJSON('./posts.json').then(function(json){
//   console.log('Contents:'+json);
// },function(error){
//   console.log('出错了',error);
// })
// setInterval(function(){
//   console.log(1)
// },1000);
// const p1 = new Promise(function(resolve,reject){
//   setTimeout(()=>{
//     // reject(new Error('fail'))
//     resolve('nb')
//   },3000);
// });
// const p2 = new Promise(function(resolve,reject){
//   setTimeout(()=>{
//     resolve(p1)
//   },1000);
// })
// p2.then(result=>console.log(result)).catch(error=>console.log(error));
  </script>
</body>
</html>